(()=>{var Nt=Object.create;var ve=Object.defineProperty;var Mt=Object.getOwnPropertyDescriptor;var $t=Object.getOwnPropertyNames,X=Object.getOwnPropertySymbols,Wt=Object.getPrototypeOf,ge=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable;var De=(e,t,r)=>t in e?ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$=(e,t)=>{for(var r in t||(t={}))ge.call(t,r)&&De(e,r,t[r]);if(X)for(var r of X(t))Oe.call(t,r)&&De(e,r,t[r]);return e};var Re=(e,t)=>{var r={};for(var n in e)ge.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&X)for(var n of X(e))t.indexOf(n)<0&&Oe.call(e,n)&&(r[n]=e[n]);return r};var R=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Gt=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of $t(t))!ge.call(e,s)&&s!==r&&ve(e,s,{get:()=>t[s],enumerable:!(n=Mt(t,s))||n.enumerable});return e};var It=(e,t,r)=>(r=e!=null?Nt(Wt(e)):{},Gt(t||!e||!e.__esModule?ve(r,"default",{value:e,enumerable:!0}):r,e));var H=(e,t,r)=>new Promise((n,s)=>{var o=p=>{try{h(r.next(p))}catch(k){s(k)}},_=p=>{try{h(r.throw(p))}catch(k){s(k)}},h=p=>p.done?n(p.value):Promise.resolve(p.value).then(o,_);h((r=r.apply(e,t)).next())});var _t=R((Nr,Fe)=>{var ke=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,n,s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",_=s.asyncIterator||"@@asyncIterator",h=s.toStringTag||"@@toStringTag";function p(l,a,f){return Object.defineProperty(l,a,{value:f,enumerable:!0,configurable:!0,writable:!0}),l[a]}try{p({},"")}catch(l){p=function(a,f,g){return a[f]=g}}function k(l,a,f,g){var m=a&&a.prototype instanceof L?a:L,A=Object.create(m.prototype),U=new de(g||[]);return A._invoke=z(l,f,U),A}e.wrap=k;function i(l,a,f){try{return{type:"normal",arg:l.call(a,f)}}catch(g){return{type:"throw",arg:g}}}var E="suspendedStart",y="suspendedYield",u="executing",v="completed",P={};function L(){}function S(){}function b(){}var C={};p(C,o,function(){return this});var d=Object.getPrototypeOf,F=d&&d(d(me([])));F&&F!==t&&r.call(F,o)&&(C=F);var x=b.prototype=L.prototype=Object.create(C);S.prototype=b,p(x,"constructor",b),p(b,"constructor",S),S.displayName=p(b,h,"GeneratorFunction");function j(l){["next","throw","return"].forEach(function(a){p(l,a,function(f){return this._invoke(a,f)})})}e.isGeneratorFunction=function(l){var a=typeof l=="function"&&l.constructor;return a?a===S||(a.displayName||a.name)==="GeneratorFunction":!1},e.mark=function(l){return Object.setPrototypeOf?Object.setPrototypeOf(l,b):(l.__proto__=b,p(l,h,"GeneratorFunction")),l.prototype=Object.create(x),l},e.awrap=function(l){return{__await:l}};function T(l,a){function f(A,U,D,B){var O=i(l[A],l,U);if(O.type==="throw")B(O.arg);else{var he=O.arg,Y=he.value;return Y&&typeof Y=="object"&&r.call(Y,"__await")?a.resolve(Y.__await).then(function(G){f("next",G,D,B)},function(G){f("throw",G,D,B)}):a.resolve(Y).then(function(G){he.value=G,D(he)},function(G){return f("throw",G,D,B)})}}var g;function m(A,U){function D(){return new a(function(B,O){f(A,U,B,O)})}return g=g?g.then(D,D):D()}this._invoke=m}j(T.prototype),p(T.prototype,_,function(){return this}),e.AsyncIterator=T,e.async=function(l,a,f,g,m){m===void 0&&(m=Promise);var A=new T(k(l,a,f,g),m);return e.isGeneratorFunction(a)?A:A.next().then(function(U){return U.done?U.value:A.next()})};function z(l,a,f){var g=E;return function(A,U){if(g===u)throw new Error("Generator is already running");if(g===v){if(A==="throw")throw U;return Ue()}for(f.method=A,f.arg=U;;){var D=f.delegate;if(D){var B=Q(D,f);if(B){if(B===P)continue;return B}}if(f.method==="next")f.sent=f._sent=f.arg;else if(f.method==="throw"){if(g===E)throw g=v,f.arg;f.dispatchException(f.arg)}else f.method==="return"&&f.abrupt("return",f.arg);g=u;var O=i(l,a,f);if(O.type==="normal"){if(g=f.done?v:y,O.arg===P)continue;return{value:O.arg,done:f.done}}else O.type==="throw"&&(g=v,f.method="throw",f.arg=O.arg)}}}function Q(l,a){var f=l.iterator[a.method];if(f===n){if(a.delegate=null,a.method==="throw"){if(l.iterator.return&&(a.method="return",a.arg=n,Q(l,a),a.method==="throw"))return P;a.method="throw",a.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var g=i(f,l.iterator,a.arg);if(g.type==="throw")return a.method="throw",a.arg=g.arg,a.delegate=null,P;var m=g.arg;if(!m)return a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,P;if(m.done)a[l.resultName]=m.value,a.next=l.nextLoc,a.method!=="return"&&(a.method="next",a.arg=n);else return m;return a.delegate=null,P}j(x),p(x,h,"Generator"),p(x,o,function(){return this}),p(x,"toString",function(){return"[object Generator]"});function Ht(l){var a={tryLoc:l[0]};1 in l&&(a.catchLoc=l[1]),2 in l&&(a.finallyLoc=l[2],a.afterLoc=l[3]),this.tryEntries.push(a)}function _e(l){var a=l.completion||{};a.type="normal",delete a.arg,l.completion=a}function de(l){this.tryEntries=[{tryLoc:"root"}],l.forEach(Ht,this),this.reset(!0)}e.keys=function(l){var a=[];for(var f in l)a.push(f);return a.reverse(),function g(){for(;a.length;){var m=a.pop();if(m in l)return g.value=m,g.done=!1,g}return g.done=!0,g}};function me(l){if(l){var a=l[o];if(a)return a.call(l);if(typeof l.next=="function")return l;if(!isNaN(l.length)){var f=-1,g=function m(){for(;++f<l.length;)if(r.call(l,f))return m.value=l[f],m.done=!1,m;return m.value=n,m.done=!0,m};return g.next=g}}return{next:Ue}}e.values=me;function Ue(){return{value:n,done:!0}}return de.prototype={constructor:de,reset:function(l){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(_e),!l)for(var a in this)a.charAt(0)==="t"&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=n)},stop:function(){this.done=!0;var l=this.tryEntries[0],a=l.completion;if(a.type==="throw")throw a.arg;return this.rval},dispatchException:function(l){if(this.done)throw l;var a=this;function f(B,O){return A.type="throw",A.arg=l,a.next=B,O&&(a.method="next",a.arg=n),!!O}for(var g=this.tryEntries.length-1;g>=0;--g){var m=this.tryEntries[g],A=m.completion;if(m.tryLoc==="root")return f("end");if(m.tryLoc<=this.prev){var U=r.call(m,"catchLoc"),D=r.call(m,"finallyLoc");if(U&&D){if(this.prev<m.catchLoc)return f(m.catchLoc,!0);if(this.prev<m.finallyLoc)return f(m.finallyLoc)}else if(U){if(this.prev<m.catchLoc)return f(m.catchLoc,!0)}else if(D){if(this.prev<m.finallyLoc)return f(m.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(l,a){for(var f=this.tryEntries.length-1;f>=0;--f){var g=this.tryEntries[f];if(g.tryLoc<=this.prev&&r.call(g,"finallyLoc")&&this.prev<g.finallyLoc){var m=g;break}}m&&(l==="break"||l==="continue")&&m.tryLoc<=a&&a<=m.finallyLoc&&(m=null);var A=m?m.completion:{};return A.type=l,A.arg=a,m?(this.method="next",this.next=m.finallyLoc,P):this.complete(A)},complete:function(l,a){if(l.type==="throw")throw l.arg;return l.type==="break"||l.type==="continue"?this.next=l.arg:l.type==="return"?(this.rval=this.arg=l.arg,this.method="return",this.next="end"):l.type==="normal"&&a&&(this.next=a),P},finish:function(l){for(var a=this.tryEntries.length-1;a>=0;--a){var f=this.tryEntries[a];if(f.finallyLoc===l)return this.complete(f.completion,f.afterLoc),_e(f),P}},catch:function(l){for(var a=this.tryEntries.length-1;a>=0;--a){var f=this.tryEntries[a];if(f.tryLoc===l){var g=f.completion;if(g.type==="throw"){var m=g.arg;_e(f)}return m}}throw new Error("illegal catch attempt")},delegateYield:function(l,a,f){return this.delegate={iterator:me(l),resultName:a,nextLoc:f},this.method==="next"&&(this.arg=n),P}},e}(typeof Fe=="object"?Fe.exports:{});try{regeneratorRuntime=ke}catch(e){typeof globalThis=="object"?globalThis.regeneratorRuntime=ke:Function("r","regeneratorRuntime = r")(ke)}});var mt=R((Mr,dt)=>{dt.exports={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}}});var Le=R(($r,vt)=>{var Ee=!1,ht=()=>{},tr=e=>{Ee=e},rr=e=>{ht=e},nr=(e,t)=>{ht({type:e,message:t}),Ee&&`${e}${t}`};vt.exports={logging:Ee,setLogging:tr,setCustomLogger:rr,log:nr}});var bt=R((Wr,yt)=>{var Z=0,Se=0,gt=e=>{let[t,r,n]=e.split(":");return parseFloat(t)*60*60+parseFloat(r)*60+parseFloat(n)};yt.exports=(e,t)=>{if(typeof e=="string")if(e.startsWith("  Duration")){let r=e.split(", ")[0].split(": ")[1],n=gt(r);t({duration:n,ratio:Se}),(Z===0||Z>n)&&(Z=n)}else if(e.startsWith("frame")||e.startsWith("size")){let r=e.split("time=")[1].split(" ")[0],n=gt(r);Se=n/Z,t({ratio:Se,time:n})}else e.startsWith("video:")&&(t({ratio:1}),Z=0)}});var kt=R((Gr,wt)=>{wt.exports=(e,t)=>{let r=e._malloc(t.length*Uint32Array.BYTES_PER_ELEMENT);return t.forEach((n,s)=>{let o=e._malloc(n.length+1);e.writeAsciiToMemory(n,o),e.setValue(r+Uint32Array.BYTES_PER_ELEMENT*s,o,"i32")}),[t.length,r]}});var ue=R((xe,Ft)=>{(function(e,t){typeof define=="function"&&define.amd?define(t):typeof xe=="object"?Ft.exports=t():e.resolveUrl=t()})(xe,function(){function e(){var t=arguments.length;if(t===0)throw new Error("resolveUrl requires at least one argument; got none.");var r=document.createElement("base");if(r.href=arguments[0],t===1)return r.href;var n=document.getElementsByTagName("head")[0];n.insertBefore(r,n.firstChild);for(var s=document.createElement("a"),o,_=1;_<t;_++)s.href=arguments[_],o=s.href,r.href=o;return n.removeChild(r),o}return e})});var Ce=R((Ir,or)=>{or.exports={_from:"@ffmpeg/ffmpeg",_id:"@ffmpeg/ffmpeg@0.10.1",_inBundle:!1,_integrity:"sha512-ChQkH7Rh57hmVo1LhfQFibWX/xqneolJKSwItwZdKPcLZuKigtYAYDIvB55pDfP17VtR1R77SxgkB2/UApB+Og==",_location:"/@ffmpeg/ffmpeg",_phantomChildren:{},_requested:{type:"tag",registry:!0,raw:"@ffmpeg/ffmpeg",name:"@ffmpeg/ffmpeg",escapedName:"@ffmpeg%2fffmpeg",scope:"@ffmpeg",rawSpec:"",saveSpec:null,fetchSpec:"latest"},_requiredBy:["#USER","/"],_resolved:"https://registry.npmjs.org/@ffmpeg/ffmpeg/-/ffmpeg-0.10.1.tgz",_shasum:"3dacf3985de9c83a95fbf79fe709920cc009b00a",_spec:"@ffmpeg/ffmpeg",_where:"/home/cs8425/code/ffmpeg-cli-online",author:{name:"Jerome Wu",email:"jeromewus@gmail.com"},browser:{"./src/node/index.js":"./src/browser/index.js"},bugs:{url:"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},bundleDependencies:!1,dependencies:{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},deprecated:!1,description:"FFmpeg WebAssembly version",devDependencies:{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.10.0","@types/emscripten":"^1.39.4","babel-loader":"^8.1.0",chai:"^4.2.0",cors:"^2.8.5",eslint:"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1",express:"^4.17.1",mocha:"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0",webpack:"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"},directories:{example:"examples"},engines:{node:">=12.16.1"},homepage:"https://github.com/ffmpegwasm/ffmpeg.wasm#readme",keywords:["ffmpeg","WebAssembly","video"],license:"MIT",main:"src/index.js",name:"@ffmpeg/ffmpeg",repository:{type:"git",url:"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},scripts:{build:"rimraf dist && webpack --config scripts/webpack.config.prod.js",lint:"eslint src",prepublishOnly:"npm run build",start:"node scripts/server.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html","test:node":"node --experimental-wasm-threads --experimental-wasm-bulk-memory node_modules/.bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js",wait:"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js"},types:"src/index.d.ts",version:"0.10.1"}});var Lt=R((zr,Et)=>{var Vr=ue(),{devDependencies:ir}=Ce();Et.exports={corePath:`https://unpkg.com/@ffmpeg/core@${ir["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`}});var xt=R((Ae,St)=>{var sr=ue(),{log:J}=Le(),Pe=(e,t)=>H(Ae,null,function*(){J("info",`fetch ${e}`);let r=yield(yield fetch(e)).arrayBuffer();J("info",`${e} file size = ${r.byteLength} bytes`);let n=new Blob([r],{type:t}),s=URL.createObjectURL(n);return J("info",`${e} blob URL = ${s}`),s});St.exports=t=>H(Ae,[t],function*({corePath:e}){if(typeof e!="string")throw Error("corePath should be a string!");let r=sr(e),n=yield Pe(r,"application/javascript"),s=yield Pe(r.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),o=yield Pe(r.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore=="undefined"?new Promise(_=>{let h=document.createElement("script"),p=()=>{h.removeEventListener("load",p),J("info","ffmpeg-core.js script loaded"),_({createFFmpegCore,corePath:n,wasmPath:s,workerPath:o})};h.src=n,h.type="text/javascript",h.addEventListener("load",p),document.getElementsByTagName("head")[0].appendChild(h)}):(J("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:n,wasmPath:s,workerPath:o}))})});var At=R((Ct,Pt)=>{var ar=ue(),lr=e=>new Promise((t,r)=>{let n=new FileReader;n.onload=()=>{t(n.result)},n.onerror=({target:{error:{code:s}}})=>{r(Error(`File could not be read! Code=${s}`))},n.readAsArrayBuffer(e)});Pt.exports=e=>H(Ct,null,function*(){let t=e;return typeof e=="undefined"?new Uint8Array:(typeof e=="string"?/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?t=atob(e.split(",")[1]).split("").map(r=>r.charCodeAt(0)):t=yield(yield fetch(ar(e))).arrayBuffer():(e instanceof File||e instanceof Blob)&&(t=yield lr(e)),new Uint8Array(t))})});var je=R((Yr,jt)=>{var cr=Lt(),fr=xt(),ur=At();jt.exports={defaultOptions:cr,getCreateFFmpegCore:fr,fetchFile:ur}});var Rt=R((Dt,Ot)=>{var{defaultArgs:pr,baseOptions:_r}=mt(),{setLogging:Tt,setCustomLogger:Ut,log:I}=Le(),dr=bt(),mr=kt(),{defaultOptions:hr,getCreateFFmpegCore:vr}=je(),{version:gr}=Ce(),Te=Error("ffmpeg.wasm is not ready, make sure you have completed load().");Ot.exports=(e={})=>{let C=$($($({},_r),hr),e),{log:t,logger:r,progress:n}=C,s=Re(C,["log","logger","progress"]),o=null,_=null,h=null,p=!1,k=n,i=d=>{d==="FFMPEG_END"&&h!==null&&(h(),h=null,p=!1)},E=({type:d,message:F})=>{I(d,F),dr(F,k),i(F)},y=()=>H(Dt,null,function*(){if(I("info","load ffmpeg-core"),o===null){I("info","loading ffmpeg-core");let{createFFmpegCore:d,corePath:F,workerPath:x,wasmPath:j}=yield vr(s);o=yield d({mainScriptUrlOrBlob:F,printErr:T=>E({type:"fferr",message:T}),print:T=>E({type:"ffout",message:T}),locateFile:(T,z)=>{if(typeof window!="undefined"){if(typeof j!="undefined"&&T.endsWith("ffmpeg-core.wasm"))return j;if(typeof x!="undefined"&&T.endsWith("ffmpeg-core.worker.js"))return x}return z+T}}),_=o.cwrap("proxy_main","number",["number","number"]),I("info","ffmpeg-core loaded")}else throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.")}),u=()=>o!==null,v=(...d)=>{if(I("info",`run ffmpeg command: ${d.join(" ")}`),o===null)throw Te;if(p)throw Error("ffmpeg.wasm can only run one command at a time");return p=!0,new Promise(F=>{let x=[...pr,...d].filter(j=>j.length!==0);h=F,_(...mr(o,x))})},P=(d,...F)=>{if(I("info",`run FS.${d} ${F.map(x=>typeof x=="string"?x:`<${x.length} bytes binary file>`).join(" ")}`),o===null)throw Te;{let x=null;try{x=o.FS[d](...F)}catch(j){throw Error(d==="readdir"?`ffmpeg.FS('readdir', '${F[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`:d==="readFile"?`ffmpeg.FS('readFile', '${F[0]}') error. Check if the path exists`:"Oops, something went wrong in FS operation.")}return x}},L=()=>{if(o===null)throw Te;p=!1,o.exit(1),o=null,_=null,h=null},S=d=>{k=d},b=d=>{Ut(d)};return Tt(t),Ut(r),I("info",`use ffmpeg.wasm v${gr}`),{setProgress:S,setLogger:b,setLogging:Tt,load:y,isLoaded:u,run:v,exit:L,FS:P}}});var qt=R((Kr,Bt)=>{_t();var yr=Rt(),{fetchFile:br}=je();Bt.exports={createFFmpeg:yr,fetchFile:br}});var ie,w,$e,Vt,K,We,Be,zt,re={},Ge=[],Yt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function W(e,t){for(var r in t)e[r]=t[r];return e}function Ie(e){var t=e.parentNode;t&&t.removeChild(e)}function c(e,t,r){var n,s,o,_={};for(o in t)o=="key"?n=t[o]:o=="ref"?s=t[o]:_[o]=t[o];if(arguments.length>2&&(_.children=arguments.length>3?ie.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)_[o]===void 0&&(_[o]=e.defaultProps[o]);return ee(e,_,n,s,null)}function ee(e,t,r,n,s){var o={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:s==null?++$e:s};return s==null&&w.vnode!=null&&w.vnode(o),o}function se(e){return e.children}function te(e,t){this.props=e,this.context=t}function V(e,t){if(t==null)return e.__?V(e.__,e.__.__k.indexOf(e)+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?V(e):null}function Ve(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return Ve(e)}}function qe(e){(!e.__d&&(e.__d=!0)&&K.push(e)&&!ne.__r++||Be!==w.debounceRendering)&&((Be=w.debounceRendering)||We)(ne)}function ne(){for(var e;ne.__r=K.length;)e=K.sort(function(t,r){return t.__v.__b-r.__v.__b}),K=[],e.some(function(t){var r,n,s,o,_,h;t.__d&&(_=(o=(r=t).__v).__e,(h=r.__P)&&(n=[],(s=W({},o)).__v=o.__v+1,ye(h,o,s,r.__n,h.ownerSVGElement!==void 0,o.__h!=null?[_]:null,n,_==null?V(o):_,o.__h),Ze(n,o),o.__e!=_&&Ve(o)))})}function ze(e,t,r,n,s,o,_,h,p,k){var i,E,y,u,v,P,L,S=n&&n.__k||Ge,b=S.length;for(r.__k=[],i=0;i<t.length;i++)if((u=r.__k[i]=(u=t[i])==null||typeof u=="boolean"?null:typeof u=="string"||typeof u=="number"||typeof u=="bigint"?ee(null,u,null,null,u):Array.isArray(u)?ee(se,{children:u},null,null,null):u.__b>0?ee(u.type,u.props,u.key,null,u.__v):u)!=null){if(u.__=r,u.__b=r.__b+1,(y=S[i])===null||y&&u.key==y.key&&u.type===y.type)S[i]=void 0;else for(E=0;E<b;E++){if((y=S[E])&&u.key==y.key&&u.type===y.type){S[E]=void 0;break}y=null}ye(e,u,y=y||re,s,o,_,h,p,k),v=u.__e,(E=u.ref)&&y.ref!=E&&(L||(L=[]),y.ref&&L.push(y.ref,null,u),L.push(E,u.__c||v,u)),v!=null?(P==null&&(P=v),typeof u.type=="function"&&u.__k===y.__k?u.__d=p=Ye(u,p,e):p=Ke(e,u,y,S,v,p),typeof r.type=="function"&&(r.__d=p)):p&&y.__e==p&&p.parentNode!=e&&(p=V(y))}for(r.__e=P,i=b;i--;)S[i]!=null&&(typeof r.type=="function"&&S[i].__e!=null&&S[i].__e==r.__d&&(r.__d=V(n,i+1)),Qe(S[i],S[i]));if(L)for(i=0;i<L.length;i++)Je(L[i],L[++i],L[++i])}function Ye(e,t,r){for(var n,s=e.__k,o=0;s&&o<s.length;o++)(n=s[o])&&(n.__=e,t=typeof n.type=="function"?Ye(n,t,r):Ke(r,n,n,s,n.__e,t));return t}function Ke(e,t,r,n,s,o){var _,h,p;if(t.__d!==void 0)_=t.__d,t.__d=void 0;else if(r==null||s!=o||s.parentNode==null)e:if(o==null||o.parentNode!==e)e.appendChild(s),_=null;else{for(h=o,p=0;(h=h.nextSibling)&&p<n.length;p+=2)if(h==s)break e;e.insertBefore(s,o),_=o}return _!==void 0?_:s.nextSibling}function Kt(e,t,r,n,s){var o;for(o in r)o==="children"||o==="key"||o in t||oe(e,o,null,r[o],n);for(o in t)s&&typeof t[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||r[o]===t[o]||oe(e,o,t[o],r[o],n)}function He(e,t,r){t[0]==="-"?e.setProperty(t,r):e[t]=r==null?"":typeof r!="number"||Yt.test(t)?r:r+"px"}function oe(e,t,r,n,s){var o;e:if(t==="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||He(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||He(e.style,t,r[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=r,r?n||e.addEventListener(t,o?Me:Ne,o):e.removeEventListener(t,o?Me:Ne,o);else if(t!=="dangerouslySetInnerHTML"){if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=r==null?"":r;break e}catch(_){}typeof r=="function"||(r!=null&&(r!==!1||t[0]==="a"&&t[1]==="r")?e.setAttribute(t,r):e.removeAttribute(t))}}function Ne(e){this.l[e.type+!1](w.event?w.event(e):e)}function Me(e){this.l[e.type+!0](w.event?w.event(e):e)}function ye(e,t,r,n,s,o,_,h,p){var k,i,E,y,u,v,P,L,S,b,C,d=t.type;if(t.constructor!==void 0)return null;r.__h!=null&&(p=r.__h,h=t.__e=r.__e,t.__h=null,o=[h]),(k=w.__b)&&k(t);try{e:if(typeof d=="function"){if(L=t.props,S=(k=d.contextType)&&n[k.__c],b=k?S?S.props.value:k.__:n,r.__c?P=(i=t.__c=r.__c).__=i.__E:("prototype"in d&&d.prototype.render?t.__c=i=new d(L,b):(t.__c=i=new te(L,b),i.constructor=d,i.render=Jt),S&&S.sub(i),i.props=L,i.state||(i.state={}),i.context=b,i.__n=n,E=i.__d=!0,i.__h=[]),i.__s==null&&(i.__s=i.state),d.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=W({},i.__s)),W(i.__s,d.getDerivedStateFromProps(L,i.__s))),y=i.props,u=i.state,E)d.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(d.getDerivedStateFromProps==null&&L!==y&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(L,b),!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(L,i.__s,b)===!1||t.__v===r.__v){i.props=L,i.state=i.__s,t.__v!==r.__v&&(i.__d=!1),i.__v=t,t.__e=r.__e,t.__k=r.__k,t.__k.forEach(function(F){F&&(F.__=t)}),i.__h.length&&_.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(L,i.__s,b),i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(y,u,v)})}i.context=b,i.props=L,i.state=i.__s,(k=w.__r)&&k(t),i.__d=!1,i.__v=t,i.__P=e,k=i.render(i.props,i.state,i.context),i.state=i.__s,i.getChildContext!=null&&(n=W(W({},n),i.getChildContext())),E||i.getSnapshotBeforeUpdate==null||(v=i.getSnapshotBeforeUpdate(y,u)),C=k!=null&&k.type===se&&k.key==null?k.props.children:k,ze(e,Array.isArray(C)?C:[C],t,r,n,s,o,_,h,p),i.base=t.__e,t.__h=null,i.__h.length&&_.push(i),P&&(i.__E=i.__=null),i.__e=!1}else o==null&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=Zt(r.__e,t,r,n,s,o,_,p);(k=w.diffed)&&k(t)}catch(F){t.__v=null,(p||o!=null)&&(t.__e=h,t.__h=!!p,o[o.indexOf(h)]=null),w.__e(F,t,r)}}function Ze(e,t){w.__c&&w.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(n){n.call(r)})}catch(n){w.__e(n,r.__v)}})}function Zt(e,t,r,n,s,o,_,h){var p,k,i,E=r.props,y=t.props,u=t.type,v=0;if(u==="svg"&&(s=!0),o!=null){for(;v<o.length;v++)if((p=o[v])&&"setAttribute"in p==!!u&&(u?p.localName===u:p.nodeType===3)){e=p,o[v]=null;break}}if(e==null){if(u===null)return document.createTextNode(y);e=s?document.createElementNS("http://www.w3.org/2000/svg",u):document.createElement(u,y.is&&y),o=null,h=!1}if(u===null)E===y||h&&e.data===y||(e.data=y);else{if(o=o&&ie.call(e.childNodes),k=(E=r.props||re).dangerouslySetInnerHTML,i=y.dangerouslySetInnerHTML,!h){if(o!=null)for(E={},v=0;v<e.attributes.length;v++)E[e.attributes[v].name]=e.attributes[v].value;(i||k)&&(i&&(k&&i.__html==k.__html||i.__html===e.innerHTML)||(e.innerHTML=i&&i.__html||""))}if(Kt(e,y,E,s,h),i)t.__k=[];else if(v=t.props.children,ze(e,Array.isArray(v)?v:[v],t,r,n,s&&u!=="foreignObject",o,_,o?o[0]:r.__k&&V(r,0),h),o!=null)for(v=o.length;v--;)o[v]!=null&&Ie(o[v]);h||("value"in y&&(v=y.value)!==void 0&&(v!==e.value||u==="progress"&&!v||u==="option"&&v!==E.value)&&oe(e,"value",v,E.value,!1),"checked"in y&&(v=y.checked)!==void 0&&v!==e.checked&&oe(e,"checked",v,E.checked,!1))}return e}function Je(e,t,r){try{typeof e=="function"?e(t):e.current=t}catch(n){w.__e(n,r)}}function Qe(e,t,r){var n,s;if(w.unmount&&w.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||Je(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(o){w.__e(o,t)}n.base=n.__P=null}if(n=e.__k)for(s=0;s<n.length;s++)n[s]&&Qe(n[s],t,typeof e.type!="function");r||e.__e==null||Ie(e.__e),e.__e=e.__d=void 0}function Jt(e,t,r){return this.constructor(e,r)}function Xe(e,t,r){var n,s,o;w.__&&w.__(e,t),s=(n=typeof r=="function")?null:r&&r.__k||t.__k,o=[],ye(t,e=(!n&&r||t).__k=c(se,null,[e]),s||re,re,t.ownerSVGElement!==void 0,!n&&r?[r]:s?null:t.firstChild?ie.call(t.childNodes):null,o,!n&&r?r:s?s.__e:t.firstChild,n),Ze(o,e)}ie=Ge.slice,w={__e:function(e,t,r,n){for(var s,o,_;t=t.__;)if((s=t.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(e)),_=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,n||{}),_=s.__d),_)return s.__E=s}catch(h){e=h}throw e}},$e=0,Vt=function(e){return e!=null&&e.constructor===void 0},te.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=W({},this.state),typeof e=="function"&&(e=e(W({},r),this.props)),e&&W(r,e),e!=null&&this.__v&&(t&&this.__h.push(t),qe(this))},te.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),qe(this))},te.prototype.render=se,K=[],We=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ne.__r=0,zt=0;var ce,q,et,le=0,at=[],tt=w.__b,rt=w.__r,nt=w.diffed,ot=w.__c,it=w.unmount;function we(e,t){w.__h&&w.__h(q,e,le||t),le=0;var r=q.__H||(q.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function N(e){return le=1,Qt(ft,e)}function Qt(e,t,r){var n=we(ce++,2);return n.t=e,n.__c||(n.__=[r?r(t):ft(void 0,t),function(s){var o=n.t(n.__[0],s);n.__[0]!==o&&(n.__=[o,n.__[1]],n.__c.setState({}))}],n.__c=q),n.__}function fe(e,t){var r=we(ce++,3);!w.__s&&ct(r.__H,t)&&(r.__=e,r.__H=t,q.__H.__h.push(r))}function lt(e){return le=5,Xt(function(){return{current:e}},[])}function Xt(e,t){var r=we(ce++,7);return ct(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function er(){for(var e;e=at.shift();)if(e.__P)try{e.__H.__h.forEach(ae),e.__H.__h.forEach(be),e.__H.__h=[]}catch(t){e.__H.__h=[],w.__e(t,e.__v)}}w.__b=function(e){q=null,tt&&tt(e)},w.__r=function(e){rt&&rt(e),ce=0;var t=(q=e.__c).__H;t&&(t.__h.forEach(ae),t.__h.forEach(be),t.__h=[])},w.diffed=function(e){nt&&nt(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(at.push(t)!==1&&et===w.requestAnimationFrame||((et=w.requestAnimationFrame)||function(r){var n,s=function(){clearTimeout(o),st&&cancelAnimationFrame(n),setTimeout(r)},o=setTimeout(s,100);st&&(n=requestAnimationFrame(s))})(er)),q=null},w.__c=function(e,t){t.some(function(r){try{r.__h.forEach(ae),r.__h=r.__h.filter(function(n){return!n.__||be(n)})}catch(n){t.some(function(s){s.__h&&(s.__h=[])}),t=[],w.__e(n,r.__v)}}),ot&&ot(e,t)},w.unmount=function(e){it&&it(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{ae(n)}catch(s){t=s}}),t&&w.__e(t,r.__v))};var st=typeof requestAnimationFrame=="function";function ae(e){var t=q,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),q=t}function be(e){var t=q;e.__c=e.__(),q=t}function ct(e,t){return!e||e.length!==t.length||t.some(function(r,n){return r!==e[n]})}function ft(e,t){return typeof t=="function"?t(e):t}var ut=(e=768)=>(window.innerWidth>0?window.innerWidth:screen.width)<e;function pt(e=768){let[t,r]=N(ut(e));return fe(()=>{let n=s=>{r(ut(e))};return window.addEventListener("resize",n,!0),()=>{window.removeEventListener(n)}},[]),t}var pe=It(qt()),M=(0,pe.createFFmpeg)({corePath:"./ffmpeg-core.js",log:!0});function wr(){let e=pt(),[t,r]=N([]),[n,s]=N(0),[o,_]=N(""),[h,p]=N([]),[k,i]=N({}),[E,y]=N("output.mp4"),[u,v]=N(["-i","v.mp4","-i","a.aac","-c:v","copy","-c:a","copy"]);fe(()=>{H(this,null,function*(){M.setProgress(C=>{let{ratio:d}=C;d>=0&&d<=1&&s(d*100),d===1&&setTimeout(()=>{s(0)},1e3)}),M.setLogger(({type:C,message:d})=>{switch(C){case"fferr":p(F=>[...F,d]);return}}),_("Loading FFmpeg.wasm, may take few minutes");let b=Date.now();yield M.load(),_(`Loaded FFmpeg.wasm in ${Date.now()-b} ms`)})},[]);let P=b=>H(this,null,function*(){_("Loading file, may take some times...");let C=Date.now(),{target:{files:d}}=b,F=[];for(let x=0;x<d.length;x++){let j=d[x],{name:T,size:z,type:Q}=j;M.FS("writeFile",T,yield(0,pe.fetchFile)(j)),F[T]={name:T,size:z,type:Q,fd:j}}_(`Loaded files in ${Date.now()-C} ms`),i(x=>$($({},x),F))}),L=b=>H(this,null,function*(){_("Loading FFmpeg.wasm"),M.isLoaded()||(_("Loading ffmpeg.wasm-core, may take few minutes"),yield M.load()),_("Start to run command");let C=Date.now(),d=E;yield M.run(...u,d),_(`Done in ${Date.now()-C} ms`);let F=M.FS("readFile",d);r(x=>{let j=URL.createObjectURL(new Blob([F.buffer],{type:"video/mp4"}));return M.FS("unlink",d),[...x,{f:d,blob:j}]})}),S=lt(null);return c("section",{class:"section"},c("h1",{class:"title"},"FFmpeg cli online"),c("p",{class:"subtitle"},"client-side-only FFmpeg power by ffmpeg.wasm"),c("a",{class:"button is-large is-rounded is-dark",style:"position: absolute;right: 1rem;top: 1rem;",title:"GitHub repo",href:"https://github.com/cs8425/ffmpeg-cli-online",target:"_blank"},c("span",{class:"icon is-medium"},c("i",{class:"fab fa-github"}))),c("hr",null),c("div",{class:"block"},c("div",{class:"block"},c("textarea",{class:"textarea is-info",placeholder:"$ ffmpeg ...",readOnly:!0},"ffmpeg ",u.join(" ")," ",E)),c("div",{class:"field is-grouped is-grouped-multiline"},u.map((b,C)=>c(kr,{argv:u,idx:C,onDel:()=>{v(F=>F.filter((x,j)=>j!==C))}})),c("div",{class:"field has-addons mx-4"},c("div",{class:"control"},c("input",{ref:S,class:"input",type:"text",placeholder:"args"})),c("div",{class:"control"},c("a",{class:"button is-info",onClick:()=>{if(!S.current)return;let b=S.current.value;b!==""&&(S.current.value="",v(C=>[...C,b]))}},c("span",{class:""},"Add")))),c("div",{class:"field has-addons mx-4"},c("div",{class:"control"},c("a",{class:"button is-static"},"output")),c("div",{class:"control"},c("input",{class:"input is-primary",type:"text",placeholder:"output.mp4",value:E,onBlur:b=>{y(b.target.value)}}))))),c("div",{class:"block"},c("nav",{class:"panel"},c("p",{class:"panel-heading"},"Files"),c("div",{class:"panel-tabs py-4"},c("div",{class:"field is-grouped is-grouped-centered is-expanded"},c("p",{class:"control"},c("div",{class:"file"},c("label",{class:"file-label"},c("input",{class:"file-input",type:"file",onChange:P,multiple:!0}),c("span",{class:"file-cta"},c("span",{class:"file-icon"},c("i",{class:"fas fa-upload"})),c("span",{class:"file-label"},"Choose files..."))))),c("p",{class:"control"},c("div",{class:"buttons"})))),Object.keys(k).map(b=>{let C=k[b];return c(Fr,$({},C))}),Object.keys(k).length>0&&c("div",{class:"panel-block"},c("button",{class:"button is-success is-outlined is-fullwidth mr-3",onClick:L},"run"),c("button",{class:"button is-danger is-outlined ml-3"},"delete")))),o&&c("div",{class:"notification"},c("button",{class:"delete"}),o),c("div",{class:"block"},c("textarea",{class:"textarea is-link",placeholder:"stderr",readonly:!0},h.join(`
`))),n!=0&&c("progress",{class:"progress is-small",value:n,max:"100"},n,"%"),c("div",{class:"block"},c("div",{class:"columns is-flex-wrap-wrap"},t.map((b,C)=>{let d=F=>{URL.revokeObjectURL(b.blob),r(x=>x.filter(j=>j.blob!==b.blob))};return c("div",{key:b,class:"column is-half-tablet is-one-third-desktop is-one-quarter-widescreen"},c("div",{class:"card"},c("header",{class:"card-header"},c("p",{class:"card-header-title"},b.f),c("div",{class:"card-header-icon"},c("button",{class:"delete",onClick:d}))),c("div",{class:"card-content"},c("video",{src:b.blob,controls:!0}))))}))))}Xe(c(wr),document.getElementById("app"));function kr(e){let{argv:t,idx:r,onDel:n=()=>{}}=e,s=o=>{t[r]=o.target.value};return c("div",{class:"field has-addons mx-4"},c("div",{class:"control"},c("a",{class:"button is-light",onClick:n},c("span",{class:"delete"}))),c("div",{class:"control"},c("input",{class:"input",type:"text",placeholder:"args",value:t[r],onInput:s})))}function Fr(e){let{name:t,size:r,type:n,fd:s}=e;return c("label",{class:"panel-block is-justify-content-space-between"},c("div",{class:"level-left"},c("div",{class:"level-item"},c("input",{type:"checkbox"})),c("div",{class:"level-item"},t)),c("div",{class:"level-right"},c("p",{class:"level-item"},Er(r))))}function Er(e){let t="Bytes";return e>1024&&(e/=1024,t="KB"),e>1024&&(e/=1024,t="MB"),e>1024&&(e/=1024,t="GB"),`${e.toFixed(2)} ${t}`}})();
